var e,o;e=void 0,o=function(){function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var o={exports:{}};!function(e){var o=function(){function e(e,o){if(!t[e]){t[e]={};for(var r=0;r<e.length;r++)t[e][e.charAt(r)]=r}return t[e][o]}var o=String.fromCharCode,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",t={},s={compressToBase64:function(e){if(null==e)return"";var o=s._compress(e,6,(function(e){return r.charAt(e)}));switch(o.length%4){default:case 0:return o;case 1:return o+"===";case 2:return o+"==";case 3:return o+"="}},decompressFromBase64:function(o){return null==o?"":""==o?null:s._decompress(o.length,32,(function(n){return e(r,o.charAt(n))}))},compressToUTF16:function(e){return null==e?"":s._compress(e,15,(function(e){return o(e+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:s._decompress(e.length,16384,(function(o){return e.charCodeAt(o)-32}))},compressToUint8Array:function(e){for(var o=s.compress(e),r=new Uint8Array(2*o.length),n=0,t=o.length;t>n;n++){var i=o.charCodeAt(n);r[2*n]=i>>>8,r[2*n+1]=i%256}return r},decompressFromUint8Array:function(e){if(null==e)return s.decompress(e);for(var r=new Array(e.length/2),n=0,t=r.length;t>n;n++)r[n]=256*e[2*n]+e[2*n+1];var i=[];return r.forEach((function(e){i.push(o(e))})),s.decompress(i.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":s._compress(e,6,(function(e){return n.charAt(e)}))},decompressFromEncodedURIComponent:function(o){return null==o?"":""==o?null:(o=o.replace(/ /g,"+"),s._decompress(o.length,32,(function(r){return e(n,o.charAt(r))})))},compress:function(e){return s._compress(e,16,(function(e){return o(e)}))},_compress:function(e,o,r){if(null==e)return"";var n,t,s,i={},c={},u="",p="",a="",l=2,h=3,f=2,d=[],m=0,g=0;for(s=0;s<e.length;s+=1)if(u=e.charAt(s),Object.prototype.hasOwnProperty.call(i,u)||(i[u]=h++,c[u]=!0),p=a+u,Object.prototype.hasOwnProperty.call(i,p))a=p;else{if(Object.prototype.hasOwnProperty.call(c,a)){if(a.charCodeAt(0)<256){for(n=0;f>n;n++)m<<=1,g==o-1?(g=0,d.push(r(m)),m=0):g++;for(t=a.charCodeAt(0),n=0;8>n;n++)m=m<<1|1&t,g==o-1?(g=0,d.push(r(m)),m=0):g++,t>>=1}else{for(t=1,n=0;f>n;n++)m=m<<1|t,g==o-1?(g=0,d.push(r(m)),m=0):g++,t=0;for(t=a.charCodeAt(0),n=0;16>n;n++)m=m<<1|1&t,g==o-1?(g=0,d.push(r(m)),m=0):g++,t>>=1}0==--l&&(l=Math.pow(2,f),f++),delete c[a]}else for(t=i[a],n=0;f>n;n++)m=m<<1|1&t,g==o-1?(g=0,d.push(r(m)),m=0):g++,t>>=1;0==--l&&(l=Math.pow(2,f),f++),i[p]=h++,a=String(u)}if(""!==a){if(Object.prototype.hasOwnProperty.call(c,a)){if(a.charCodeAt(0)<256){for(n=0;f>n;n++)m<<=1,g==o-1?(g=0,d.push(r(m)),m=0):g++;for(t=a.charCodeAt(0),n=0;8>n;n++)m=m<<1|1&t,g==o-1?(g=0,d.push(r(m)),m=0):g++,t>>=1}else{for(t=1,n=0;f>n;n++)m=m<<1|t,g==o-1?(g=0,d.push(r(m)),m=0):g++,t=0;for(t=a.charCodeAt(0),n=0;16>n;n++)m=m<<1|1&t,g==o-1?(g=0,d.push(r(m)),m=0):g++,t>>=1}0==--l&&(l=Math.pow(2,f),f++),delete c[a]}else for(t=i[a],n=0;f>n;n++)m=m<<1|1&t,g==o-1?(g=0,d.push(r(m)),m=0):g++,t>>=1;0==--l&&(l=Math.pow(2,f),f++)}for(t=2,n=0;f>n;n++)m=m<<1|1&t,g==o-1?(g=0,d.push(r(m)),m=0):g++,t>>=1;for(;;){if(m<<=1,g==o-1){d.push(r(m));break}g++}return d.join("")},decompress:function(e){return null==e?"":""==e?null:s._decompress(e.length,32768,(function(o){return e.charCodeAt(o)}))},_decompress:function(e,r,n){var t,s,i,c,u,p,a,l=[],h=4,f=4,d=3,m="",g=[],v={val:n(0),position:r,index:1};for(t=0;3>t;t+=1)l[t]=t;for(i=0,u=Math.pow(2,2),p=1;p!=u;)c=v.val&v.position,v.position>>=1,0==v.position&&(v.position=r,v.val=n(v.index++)),i|=(c>0?1:0)*p,p<<=1;switch(i){case 0:for(i=0,u=Math.pow(2,8),p=1;p!=u;)c=v.val&v.position,v.position>>=1,0==v.position&&(v.position=r,v.val=n(v.index++)),i|=(c>0?1:0)*p,p<<=1;a=o(i);break;case 1:for(i=0,u=Math.pow(2,16),p=1;p!=u;)c=v.val&v.position,v.position>>=1,0==v.position&&(v.position=r,v.val=n(v.index++)),i|=(c>0?1:0)*p,p<<=1;a=o(i);break;case 2:return""}for(l[3]=a,s=a,g.push(a);;){if(v.index>e)return"";for(i=0,u=Math.pow(2,d),p=1;p!=u;)c=v.val&v.position,v.position>>=1,0==v.position&&(v.position=r,v.val=n(v.index++)),i|=(c>0?1:0)*p,p<<=1;switch(a=i){case 0:for(i=0,u=Math.pow(2,8),p=1;p!=u;)c=v.val&v.position,v.position>>=1,0==v.position&&(v.position=r,v.val=n(v.index++)),i|=(c>0?1:0)*p,p<<=1;l[f++]=o(i),a=f-1,h--;break;case 1:for(i=0,u=Math.pow(2,16),p=1;p!=u;)c=v.val&v.position,v.position>>=1,0==v.position&&(v.position=r,v.val=n(v.index++)),i|=(c>0?1:0)*p,p<<=1;l[f++]=o(i),a=f-1,h--;break;case 2:return g.join("")}if(0==h&&(h=Math.pow(2,d),d++),l[a])m=l[a];else{if(a!==f)return null;m=s+s.charAt(0)}g.push(m),l[f++]=s+m.charAt(0),s=m,0==--h&&(h=Math.pow(2,d),d++)}}};return s}();null!=e&&(e.exports=o)}(o);var r=e(o.exports);const n=Phaser.Utils.Objects.GetFastValue;class t{constructor(e){this.resetFromJSON(e)}resetFromJSON(e){return this.setEncoding(n(e,"encoding",0)),this}toJSON(){return{encoding:this.encoding}}setEncoding(e){return void 0===e?e=0:"string"==typeof e&&(e=s[e.toLowerCase()]||0),this.encoding=e,this}compress(e){var o=i[this.encoding];return r[o](e)}decompress(e){var o=c[this.encoding];return r[o](e)}}const s={none:0,base64:1,utf16:2,uri:3},i=["compress","compressToBase64","compressToUTF16","compressToEncodedURIComponent"],c=["decompress","decompressFromBase64","decompressFromUTF16","decompressFromEncodedURIComponent"];class u extends Phaser.Plugins.BasePlugin{constructor(e){super(e),this.lzstring=new t}start(){this.game.events.on("destroy",this.destroy,this)}destroy(){this.lzstring=null,this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}add(e){return new t(e)}}return u},"object"==typeof exports&&"undefined"!=typeof module?module.exports=o():"function"==typeof define&&define.amd?define(o):(e="undefined"!=typeof globalThis?globalThis:e||self).rexlzstringplugin=o();
